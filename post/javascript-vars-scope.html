<!DOCTYPE HTML>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <meta name="generator" content="nico 0.5.2">
    <meta name="theme" content="KISS 0.1">
    <title>JavaScript 无块级作用域 - 闲耘™.博客</title>
    <link rel="alternate" type="application/rss+xml" href="https://hotoo.github.io/blog//feed.xml" title="闲耘™.博客" />
    <link rel="stylesheet" href="../static/syntax.css" />
    <link type="text/css" rel="stylesheet" href="../static/template.css" />
  </head>
  <body>
  <div id="wrapper">
    <header class="navigation" role="navigation">
      <!--<a class="home" href="../">闲耘™.博客</a>-->
      <div style="float:right;">
        <form action="/search.html">
          <input type="text" name="q" autocomplete="off" />
          <input type="submit" value="搜索" />
        </form>
      </div>
      <nav class="menu">
        <ul>
          <li class="first"><a href="https://hotoo.github.io/"
            title="Home">Home</a></li>
          <li class=" actived"><a href="/"
            title="Blog">Blog</a></li>
          <li class=""><a href="https://hotoo.github.io/wiki/"
            title="Wiki">Wiki</a></li>
          <li class=""><a href="https://hotoo.github.io/wiki/Vim.html"
            title="Vim">Vim</a></li>
          <li class=""><a href="https://hotoo.github.io/twitter/"
            title="Twitter">Twitter</a></li>
          <li class="last"><a href="https://github.com/hotoo"
            title="Project">Project</a></li>
        </ul>
      </nav>
    </header>

<div id="container">
  <div id="content" class="document">
<div class="hentry">
  <h1 class="entry-title">JavaScript 无块级作用域</h1>
  <div class="entry-content"><p>最近在做一系列JavaScript压缩工具，语法压缩，语义压缩，字符串压缩均有涉及（p.s.有趣的是，
压缩变量名之类的“有损压缩”不影响代码执行，但是字符串压缩这样的“无损压缩”却总是需要解压消耗）。</p>
<p>在实现压缩局部变量名时，最初的实现是将 if/else, for/in, do/while, switch/case/default,
try/catch/finally, with和Object实例对象（后面统称为“块级作用域”）与function一样，
都作为独立的作用域，但是测试发现在JavaScript中并不是这么回事。</p>
<p>尝试着在块级作用域里声明定义变量：</p><div class="highlight"><div class="codes"><div class="code"><pre><code class="javascript"><span class="hljs-keyword">if</span>(<span class="hljs-literal">true</span>){
<span class="hljs-keyword">var</span> bool=<span class="hljs-literal">true</span>;
}
<span class="hljs-built_in">document</span>.write(bool); <span class="hljs-comment">// output:true</span></code></pre></div><pre class="line"><a name="L1-1" href="#L1-1">1</a>
<a name="L1-2" href="#L1-2">2</a>
<a name="L1-3" href="#L1-3">3</a>
<a name="L1-4" href="#L1-4">4</a></pre></div></div><p>会发现输出true，而且不论嵌套多深，也不论使用任何块级作用域进行嵌套，最后变量
依然如同在调用处之前，而且同级的作用域中定义的一样；值为在此之前，在块级作用域中所做改变的结果。
注意：如果块级作用域未被执行，则其中声明定义的变量会被声明（var name），但不被定义
（即未被初始化，此时name为undefined，引用name时不抛异常）。</p><div class="highlight"><div class="codes"><div class="code"><pre><code class="javascript"><span class="hljs-keyword">if</span>(<span class="hljs-literal">false</span>){<span class="hljs-keyword">var</span> bool=<span class="hljs-literal">true</span>;}
<span class="hljs-built_in">document</span>.write(bool); <span class="hljs-comment">// output:undefined</span></code></pre></div><pre class="line"><a name="L2-1" href="#L2-1">1</a>
<a name="L2-2" href="#L2-2">2</a></pre></div></div><p>之前虽知道，IE里for(var i=0;...)里定义的i，在for之外也是可以使用的，但是现在才知道这种情况更为猖獗，
大出我的意料之外，而更意外的是，IE 7(IE6?), Firefox 3(FF1,FF2?), Opera 9, Chrome 1, Safari 3表现均丝毫不差。</p>
<p>虽然与某些编程规范不同，但是js就是这样了，唉。早知道这样，压缩变量名这部分也就不用那么费劲了，只得重写了。</p>
<p>另外还有一些JavaScript作用域方面的文章：<br />
[<a href="http://www.blueidea.com/tech/web/2007/4855.asp">http://www.blueidea.com/tech/web/2007/4855.asp</a> JavaScript中的作用域]，好像是realazy翻译的，
文章很好，虽然有点文不对题（主要阐述this的作用域链问题）。<br />
[<a href="http://www.cnblogs.com/3zfp/archive/2008/10/24/528644.html">http://www.cnblogs.com/3zfp/archive/2008/10/24/528644.html</a> js变量作用域及可访问性的探讨]，
详细介绍了各种变量的作用域及其可访问性问题。</p>
<p>附A 测试代码：</p><div class="highlight"><div class="codes"><div class="code"><pre><code class="javascript"><span class="hljs-comment">// Global Scope</span>
<span class="hljs-keyword">if</span> (<span class="hljs-literal">true</span>){
  <span class="hljs-keyword">var</span> v10 = <span class="hljs-literal">true</span>;
}<span class="hljs-keyword">else</span> {
  <span class="hljs-keyword">var</span> v00 = <span class="hljs-literal">false</span>;
}
<span class="hljs-built_in">document</span>.write(<span class="hljs-string">"v10 : "</span>+v10+<span class="hljs-string">"&lt;br /&gt;"</span>);
<span class="hljs-built_in">document</span>.write(<span class="hljs-string">"v00 : "</span>+v00+<span class="hljs-string">"&lt;br /&gt;"</span>);
<span class="hljs-built_in">document</span>.write(<span class="hljs-string">"&lt;hr /&gt;"</span>);

<span class="hljs-comment">// Function Scope</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">functionScopes</span>(<span class="hljs-params"></span>)</span>{
  <span class="hljs-keyword">if</span> (<span class="hljs-literal">true</span>){
      <span class="hljs-comment">// 以下均执行</span>
      <span class="hljs-keyword">var</span> v11 = <span class="hljs-literal">true</span>;

      <span class="hljs-keyword">do</span>{
          <span class="hljs-keyword">var</span> v12 = <span class="hljs-literal">true</span>;
      }<span class="hljs-keyword">while</span> (<span class="hljs-literal">false</span>);

      <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>){
          <span class="hljs-keyword">var</span> v13 = <span class="hljs-literal">true</span>;
          <span class="hljs-keyword">break</span>;
      }

      <span class="hljs-keyword">switch</span> (<span class="hljs-number">1</span>){
      <span class="hljs-keyword">case</span> <span class="hljs-number">1</span>:
          <span class="hljs-keyword">var</span> v14 = <span class="hljs-literal">true</span>;
      <span class="hljs-keyword">default</span>:
          <span class="hljs-keyword">var</span> v15 = <span class="hljs-literal">true</span>;
      }

      <span class="hljs-keyword">try</span>{
          <span class="hljs-keyword">var</span> v16 = <span class="hljs-literal">true</span>;
          <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">""</span>);
      }<span class="hljs-keyword">catch</span>(e){
          <span class="hljs-keyword">var</span> v17 = <span class="hljs-literal">true</span>;
      }<span class="hljs-keyword">finally</span>{
          <span class="hljs-keyword">var</span> v18 = <span class="hljs-literal">true</span>;
      }

      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> v19=<span class="hljs-number">0</span>; v19&lt;<span class="hljs-number">1</span>; v19++){
          <span class="hljs-keyword">var</span> v1a=<span class="hljs-literal">true</span>;
      }

      <span class="hljs-keyword">with</span>(v11){
          <span class="hljs-keyword">var</span> v1b = <span class="hljs-literal">true</span>;
      }

      <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">inn1</span>(<span class="hljs-params"></span>)</span>{
          <span class="hljs-keyword">var</span> inn11 = <span class="hljs-literal">false</span>;
      }
  }<span class="hljs-keyword">else</span> {
      <span class="hljs-comment">// 以下均未执行</span>
      <span class="hljs-keyword">var</span> v01 = <span class="hljs-literal">false</span>;

      <span class="hljs-keyword">do</span>{
          <span class="hljs-keyword">var</span> v02 = <span class="hljs-literal">false</span>;
      }<span class="hljs-keyword">while</span> (<span class="hljs-literal">false</span>);

      <span class="hljs-keyword">while</span> (<span class="hljs-literal">false</span>){
          <span class="hljs-keyword">var</span> v03 = <span class="hljs-literal">false</span>;
      }

      <span class="hljs-keyword">try</span>{
          <span class="hljs-keyword">var</span> v06 = <span class="hljs-literal">true</span>;
          <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">""</span>);
      }<span class="hljs-keyword">catch</span>(e){
          <span class="hljs-keyword">var</span> v07 = <span class="hljs-literal">true</span>;
      }<span class="hljs-keyword">finally</span>{
          <span class="hljs-keyword">var</span> v08 = <span class="hljs-literal">true</span>;
      }

      <span class="hljs-keyword">switch</span> (<span class="hljs-number">1</span>){
      <span class="hljs-keyword">case</span> <span class="hljs-number">1</span>:
          <span class="hljs-keyword">var</span> v04 = <span class="hljs-literal">true</span>;
      <span class="hljs-keyword">default</span>:
          <span class="hljs-keyword">var</span> v05 = <span class="hljs-literal">false</span>;
      }

      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> v09=<span class="hljs-number">0</span>; v09&lt;<span class="hljs-number">1</span>; v09++){
          <span class="hljs-keyword">var</span> v0a=<span class="hljs-literal">true</span>;
      }

      <span class="hljs-keyword">with</span>(v01){
          <span class="hljs-keyword">var</span> v0b = <span class="hljs-literal">true</span>;
      }

      <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">inn0</span>(<span class="hljs-params"></span>)</span>{
          <span class="hljs-keyword">var</span> inn01 = <span class="hljs-literal">false</span>;
      }
  }
  <span class="hljs-built_in">document</span>.write(<span class="hljs-string">"v11 : "</span>+v11+<span class="hljs-string">"&lt;br /&gt;"</span>);
  <span class="hljs-built_in">document</span>.write(<span class="hljs-string">"v12 : "</span>+v12+<span class="hljs-string">"&lt;br /&gt;"</span>);
  <span class="hljs-built_in">document</span>.write(<span class="hljs-string">"v13 : "</span>+v13+<span class="hljs-string">"&lt;br /&gt;"</span>);
  <span class="hljs-built_in">document</span>.write(<span class="hljs-string">"v14 : "</span>+v14+<span class="hljs-string">"&lt;br /&gt;"</span>);
  <span class="hljs-built_in">document</span>.write(<span class="hljs-string">"v15 : "</span>+v15+<span class="hljs-string">"&lt;br /&gt;"</span>);
  <span class="hljs-built_in">document</span>.write(<span class="hljs-string">"v16 : "</span>+v16+<span class="hljs-string">"&lt;br /&gt;"</span>);
  <span class="hljs-built_in">document</span>.write(<span class="hljs-string">"v17 : "</span>+v17+<span class="hljs-string">"&lt;br /&gt;"</span>);
  <span class="hljs-built_in">document</span>.write(<span class="hljs-string">"v18 : "</span>+v18+<span class="hljs-string">"&lt;br /&gt;"</span>);
  <span class="hljs-built_in">document</span>.write(<span class="hljs-string">"v19 : "</span>+v19+<span class="hljs-string">"&lt;br /&gt;"</span>);
  <span class="hljs-built_in">document</span>.write(<span class="hljs-string">"v1a : "</span>+v1a+<span class="hljs-string">"&lt;br /&gt;"</span>);
  <span class="hljs-built_in">document</span>.write(<span class="hljs-string">"v1b : "</span>+v1b+<span class="hljs-string">"&lt;br /&gt;"</span>);
  <span class="hljs-built_in">document</span>.write(<span class="hljs-string">"&lt;hr /&gt;"</span>);
  <span class="hljs-built_in">document</span>.write(<span class="hljs-string">"v01 : "</span>+v01+<span class="hljs-string">"&lt;br /&gt;"</span>);
  <span class="hljs-built_in">document</span>.write(<span class="hljs-string">"v02 : "</span>+v02+<span class="hljs-string">"&lt;br /&gt;"</span>);
  <span class="hljs-built_in">document</span>.write(<span class="hljs-string">"v03 : "</span>+v03+<span class="hljs-string">"&lt;br /&gt;"</span>);
  <span class="hljs-built_in">document</span>.write(<span class="hljs-string">"v04 : "</span>+v04+<span class="hljs-string">"&lt;br /&gt;"</span>);
  <span class="hljs-built_in">document</span>.write(<span class="hljs-string">"v05 : "</span>+v05+<span class="hljs-string">"&lt;br /&gt;"</span>);
  <span class="hljs-built_in">document</span>.write(<span class="hljs-string">"v06 : "</span>+v06+<span class="hljs-string">"&lt;br /&gt;"</span>);
  <span class="hljs-built_in">document</span>.write(<span class="hljs-string">"v07 : "</span>+v07+<span class="hljs-string">"&lt;br /&gt;"</span>);
  <span class="hljs-built_in">document</span>.write(<span class="hljs-string">"v08 : "</span>+v08+<span class="hljs-string">"&lt;br /&gt;"</span>);
  <span class="hljs-built_in">document</span>.write(<span class="hljs-string">"v09 : "</span>+v09+<span class="hljs-string">"&lt;br /&gt;"</span>);
  <span class="hljs-built_in">document</span>.write(<span class="hljs-string">"v0a : "</span>+v0a+<span class="hljs-string">"&lt;br /&gt;"</span>);
  <span class="hljs-built_in">document</span>.write(<span class="hljs-string">"v0b : "</span>+v0b+<span class="hljs-string">"&lt;br /&gt;"</span>);

  <span class="hljs-built_in">document</span>.write(<span class="hljs-string">"&lt;hr /&gt;"</span>);
  <span class="hljs-keyword">try</span>{alert(inn11);}<span class="hljs-keyword">catch</span>(e){<span class="hljs-built_in">document</span>.write((e.message||e)+<span class="hljs-string">"&lt;br /&gt;"</span>);}
  <span class="hljs-keyword">try</span>{alert(inn01);}<span class="hljs-keyword">catch</span>(e){<span class="hljs-built_in">document</span>.write((e.message||e)+<span class="hljs-string">"&lt;br /&gt;"</span>);}
}
functionScopes();

<span class="hljs-built_in">document</span>.write(<span class="hljs-string">"&lt;hr /&gt;"</span>);
<span class="hljs-keyword">try</span>{alert(v11);}<span class="hljs-keyword">catch</span>(e){<span class="hljs-built_in">document</span>.write((e.message||e)+<span class="hljs-string">"&lt;br /&gt;"</span>);}
<span class="hljs-keyword">try</span>{alert(v12);}<span class="hljs-keyword">catch</span>(e){<span class="hljs-built_in">document</span>.write((e.message||e)+<span class="hljs-string">"&lt;br /&gt;"</span>);}
<span class="hljs-keyword">try</span>{alert(v13);}<span class="hljs-keyword">catch</span>(e){<span class="hljs-built_in">document</span>.write((e.message||e)+<span class="hljs-string">"&lt;br /&gt;"</span>);}
<span class="hljs-keyword">try</span>{alert(v14);}<span class="hljs-keyword">catch</span>(e){<span class="hljs-built_in">document</span>.write((e.message||e)+<span class="hljs-string">"&lt;br /&gt;"</span>);}
<span class="hljs-keyword">try</span>{alert(v15);}<span class="hljs-keyword">catch</span>(e){<span class="hljs-built_in">document</span>.write((e.message||e)+<span class="hljs-string">"&lt;br /&gt;"</span>);}
<span class="hljs-keyword">try</span>{alert(v16);}<span class="hljs-keyword">catch</span>(e){<span class="hljs-built_in">document</span>.write((e.message||e)+<span class="hljs-string">"&lt;br /&gt;"</span>);}
<span class="hljs-keyword">try</span>{alert(v17);}<span class="hljs-keyword">catch</span>(e){<span class="hljs-built_in">document</span>.write((e.message||e)+<span class="hljs-string">"&lt;br /&gt;"</span>);}
<span class="hljs-keyword">try</span>{alert(v18);}<span class="hljs-keyword">catch</span>(e){<span class="hljs-built_in">document</span>.write((e.message||e)+<span class="hljs-string">"&lt;br /&gt;"</span>);}
<span class="hljs-keyword">try</span>{alert(v19);}<span class="hljs-keyword">catch</span>(e){<span class="hljs-built_in">document</span>.write((e.message||e)+<span class="hljs-string">"&lt;br /&gt;"</span>);}
<span class="hljs-keyword">try</span>{alert(v1a);}<span class="hljs-keyword">catch</span>(e){<span class="hljs-built_in">document</span>.write((e.message||e)+<span class="hljs-string">"&lt;br /&gt;"</span>);}
<span class="hljs-keyword">try</span>{alert(v1b);}<span class="hljs-keyword">catch</span>(e){<span class="hljs-built_in">document</span>.write((e.message||e)+<span class="hljs-string">"&lt;br /&gt;"</span>);}

<span class="hljs-keyword">try</span>{alert(v01);}<span class="hljs-keyword">catch</span>(e){<span class="hljs-built_in">document</span>.write((e.message||e)+<span class="hljs-string">"&lt;br /&gt;"</span>);}
<span class="hljs-keyword">try</span>{alert(v02);}<span class="hljs-keyword">catch</span>(e){<span class="hljs-built_in">document</span>.write((e.message||e)+<span class="hljs-string">"&lt;br /&gt;"</span>);}
<span class="hljs-keyword">try</span>{alert(v03);}<span class="hljs-keyword">catch</span>(e){<span class="hljs-built_in">document</span>.write((e.message||e)+<span class="hljs-string">"&lt;br /&gt;"</span>);}
<span class="hljs-keyword">try</span>{alert(v04);}<span class="hljs-keyword">catch</span>(e){<span class="hljs-built_in">document</span>.write((e.message||e)+<span class="hljs-string">"&lt;br /&gt;"</span>);}
<span class="hljs-keyword">try</span>{alert(v05);}<span class="hljs-keyword">catch</span>(e){<span class="hljs-built_in">document</span>.write((e.message||e)+<span class="hljs-string">"&lt;br /&gt;"</span>);}
<span class="hljs-keyword">try</span>{alert(v06);}<span class="hljs-keyword">catch</span>(e){<span class="hljs-built_in">document</span>.write((e.message||e)+<span class="hljs-string">"&lt;br /&gt;"</span>);}
<span class="hljs-keyword">try</span>{alert(v07);}<span class="hljs-keyword">catch</span>(e){<span class="hljs-built_in">document</span>.write((e.message||e)+<span class="hljs-string">"&lt;br /&gt;"</span>);}
<span class="hljs-keyword">try</span>{alert(v08);}<span class="hljs-keyword">catch</span>(e){<span class="hljs-built_in">document</span>.write((e.message||e)+<span class="hljs-string">"&lt;br /&gt;"</span>);}
<span class="hljs-keyword">try</span>{alert(v09);}<span class="hljs-keyword">catch</span>(e){<span class="hljs-built_in">document</span>.write((e.message||e)+<span class="hljs-string">"&lt;br /&gt;"</span>);}
<span class="hljs-keyword">try</span>{alert(v0a);}<span class="hljs-keyword">catch</span>(e){<span class="hljs-built_in">document</span>.write((e.message||e)+<span class="hljs-string">"&lt;br /&gt;"</span>);}
<span class="hljs-keyword">try</span>{alert(v0b);}<span class="hljs-keyword">catch</span>(e){<span class="hljs-built_in">document</span>.write((e.message||e)+<span class="hljs-string">"&lt;br /&gt;"</span>);}</code></pre></div><pre class="line"><a name="L3-1" href="#L3-1">1</a>
<a name="L3-2" href="#L3-2">2</a>
<a name="L3-3" href="#L3-3">3</a>
<a name="L3-4" href="#L3-4">4</a>
<a name="L3-5" href="#L3-5">5</a>
<a name="L3-6" href="#L3-6">6</a>
<a name="L3-7" href="#L3-7">7</a>
<a name="L3-8" href="#L3-8">8</a>
<a name="L3-9" href="#L3-9">9</a>
<a name="L3-10" href="#L3-10">10</a>
<a name="L3-11" href="#L3-11">11</a>
<a name="L3-12" href="#L3-12">12</a>
<a name="L3-13" href="#L3-13">13</a>
<a name="L3-14" href="#L3-14">14</a>
<a name="L3-15" href="#L3-15">15</a>
<a name="L3-16" href="#L3-16">16</a>
<a name="L3-17" href="#L3-17">17</a>
<a name="L3-18" href="#L3-18">18</a>
<a name="L3-19" href="#L3-19">19</a>
<a name="L3-20" href="#L3-20">20</a>
<a name="L3-21" href="#L3-21">21</a>
<a name="L3-22" href="#L3-22">22</a>
<a name="L3-23" href="#L3-23">23</a>
<a name="L3-24" href="#L3-24">24</a>
<a name="L3-25" href="#L3-25">25</a>
<a name="L3-26" href="#L3-26">26</a>
<a name="L3-27" href="#L3-27">27</a>
<a name="L3-28" href="#L3-28">28</a>
<a name="L3-29" href="#L3-29">29</a>
<a name="L3-30" href="#L3-30">30</a>
<a name="L3-31" href="#L3-31">31</a>
<a name="L3-32" href="#L3-32">32</a>
<a name="L3-33" href="#L3-33">33</a>
<a name="L3-34" href="#L3-34">34</a>
<a name="L3-35" href="#L3-35">35</a>
<a name="L3-36" href="#L3-36">36</a>
<a name="L3-37" href="#L3-37">37</a>
<a name="L3-38" href="#L3-38">38</a>
<a name="L3-39" href="#L3-39">39</a>
<a name="L3-40" href="#L3-40">40</a>
<a name="L3-41" href="#L3-41">41</a>
<a name="L3-42" href="#L3-42">42</a>
<a name="L3-43" href="#L3-43">43</a>
<a name="L3-44" href="#L3-44">44</a>
<a name="L3-45" href="#L3-45">45</a>
<a name="L3-46" href="#L3-46">46</a>
<a name="L3-47" href="#L3-47">47</a>
<a name="L3-48" href="#L3-48">48</a>
<a name="L3-49" href="#L3-49">49</a>
<a name="L3-50" href="#L3-50">50</a>
<a name="L3-51" href="#L3-51">51</a>
<a name="L3-52" href="#L3-52">52</a>
<a name="L3-53" href="#L3-53">53</a>
<a name="L3-54" href="#L3-54">54</a>
<a name="L3-55" href="#L3-55">55</a>
<a name="L3-56" href="#L3-56">56</a>
<a name="L3-57" href="#L3-57">57</a>
<a name="L3-58" href="#L3-58">58</a>
<a name="L3-59" href="#L3-59">59</a>
<a name="L3-60" href="#L3-60">60</a>
<a name="L3-61" href="#L3-61">61</a>
<a name="L3-62" href="#L3-62">62</a>
<a name="L3-63" href="#L3-63">63</a>
<a name="L3-64" href="#L3-64">64</a>
<a name="L3-65" href="#L3-65">65</a>
<a name="L3-66" href="#L3-66">66</a>
<a name="L3-67" href="#L3-67">67</a>
<a name="L3-68" href="#L3-68">68</a>
<a name="L3-69" href="#L3-69">69</a>
<a name="L3-70" href="#L3-70">70</a>
<a name="L3-71" href="#L3-71">71</a>
<a name="L3-72" href="#L3-72">72</a>
<a name="L3-73" href="#L3-73">73</a>
<a name="L3-74" href="#L3-74">74</a>
<a name="L3-75" href="#L3-75">75</a>
<a name="L3-76" href="#L3-76">76</a>
<a name="L3-77" href="#L3-77">77</a>
<a name="L3-78" href="#L3-78">78</a>
<a name="L3-79" href="#L3-79">79</a>
<a name="L3-80" href="#L3-80">80</a>
<a name="L3-81" href="#L3-81">81</a>
<a name="L3-82" href="#L3-82">82</a>
<a name="L3-83" href="#L3-83">83</a>
<a name="L3-84" href="#L3-84">84</a>
<a name="L3-85" href="#L3-85">85</a>
<a name="L3-86" href="#L3-86">86</a>
<a name="L3-87" href="#L3-87">87</a>
<a name="L3-88" href="#L3-88">88</a>
<a name="L3-89" href="#L3-89">89</a>
<a name="L3-90" href="#L3-90">90</a>
<a name="L3-91" href="#L3-91">91</a>
<a name="L3-92" href="#L3-92">92</a>
<a name="L3-93" href="#L3-93">93</a>
<a name="L3-94" href="#L3-94">94</a>
<a name="L3-95" href="#L3-95">95</a>
<a name="L3-96" href="#L3-96">96</a>
<a name="L3-97" href="#L3-97">97</a>
<a name="L3-98" href="#L3-98">98</a>
<a name="L3-99" href="#L3-99">99</a>
<a name="L3-100" href="#L3-100">100</a>
<a name="L3-101" href="#L3-101">101</a>
<a name="L3-102" href="#L3-102">102</a>
<a name="L3-103" href="#L3-103">103</a>
<a name="L3-104" href="#L3-104">104</a>
<a name="L3-105" href="#L3-105">105</a>
<a name="L3-106" href="#L3-106">106</a>
<a name="L3-107" href="#L3-107">107</a>
<a name="L3-108" href="#L3-108">108</a>
<a name="L3-109" href="#L3-109">109</a>
<a name="L3-110" href="#L3-110">110</a>
<a name="L3-111" href="#L3-111">111</a>
<a name="L3-112" href="#L3-112">112</a>
<a name="L3-113" href="#L3-113">113</a>
<a name="L3-114" href="#L3-114">114</a>
<a name="L3-115" href="#L3-115">115</a>
<a name="L3-116" href="#L3-116">116</a>
<a name="L3-117" href="#L3-117">117</a>
<a name="L3-118" href="#L3-118">118</a>
<a name="L3-119" href="#L3-119">119</a>
<a name="L3-120" href="#L3-120">120</a>
<a name="L3-121" href="#L3-121">121</a>
<a name="L3-122" href="#L3-122">122</a>
<a name="L3-123" href="#L3-123">123</a>
<a name="L3-124" href="#L3-124">124</a>
<a name="L3-125" href="#L3-125">125</a>
<a name="L3-126" href="#L3-126">126</a>
<a name="L3-127" href="#L3-127">127</a>
<a name="L3-128" href="#L3-128">128</a>
<a name="L3-129" href="#L3-129">129</a>
<a name="L3-130" href="#L3-130">130</a>
<a name="L3-131" href="#L3-131">131</a>
<a name="L3-132" href="#L3-132">132</a>
<a name="L3-133" href="#L3-133">133</a>
<a name="L3-134" href="#L3-134">134</a>
<a name="L3-135" href="#L3-135">135</a>
<a name="L3-136" href="#L3-136">136</a>
<a name="L3-137" href="#L3-137">137</a>
<a name="L3-138" href="#L3-138">138</a>
<a name="L3-139" href="#L3-139">139</a>
<a name="L3-140" href="#L3-140">140</a>
<a name="L3-141" href="#L3-141">141</a>
<a name="L3-142" href="#L3-142">142</a>
<a name="L3-143" href="#L3-143">143</a>
<a name="L3-144" href="#L3-144">144</a>
<a name="L3-145" href="#L3-145">145</a>
<a name="L3-146" href="#L3-146">146</a></pre></div></div><p>附B 测试结果（IE 7, FF 3, Opera 9, Safari 3, Chorme 1均同）：</p><div class="highlight"><div class="codes"><div class="code"><pre>    v10 : true
    v00 : undefined
    v11 : true
    v12 : true
    v13 : true
    v14 : true
    v15 : true
    v16 : true
    v17 : true
    v18 : true
    v19 : 1
    v1a : true
    v1b : true
    v01 : undefined
    v02 : undefined
    v03 : undefined
    v04 : undefined
    v05 : undefined
    v06 : undefined
    v07 : undefined
    v08 : undefined
    v09 : undefined
    v0a : undefined
    v0b : undefined
    &#39;inn11&#39; 未定义
    &#39;inn01&#39; 未定义
    &#39;v11&#39; 未定义
    &#39;v12&#39; 未定义
    &#39;v13&#39; 未定义
    &#39;v14&#39; 未定义
    &#39;v15&#39; 未定义
    &#39;v16&#39; 未定义
    &#39;v17&#39; 未定义
    &#39;v18&#39; 未定义
    &#39;v19&#39; 未定义
    &#39;v1a&#39; 未定义
    &#39;v1b&#39; 未定义
    &#39;v01&#39; 未定义
    &#39;v02&#39; 未定义
    &#39;v03&#39; 未定义
    &#39;v04&#39; 未定义
    &#39;v05&#39; 未定义
    &#39;v06&#39; 未定义
    &#39;v07&#39; 未定义
    &#39;v08&#39; 未定义
    &#39;v09&#39; 未定义
    &#39;v0a&#39; 未定义
    &#39;v0b&#39; 未定义</pre></div><pre class="line"><a name="L4-1" href="#L4-1">1</a>
<a name="L4-2" href="#L4-2">2</a>
<a name="L4-3" href="#L4-3">3</a>
<a name="L4-4" href="#L4-4">4</a>
<a name="L4-5" href="#L4-5">5</a>
<a name="L4-6" href="#L4-6">6</a>
<a name="L4-7" href="#L4-7">7</a>
<a name="L4-8" href="#L4-8">8</a>
<a name="L4-9" href="#L4-9">9</a>
<a name="L4-10" href="#L4-10">10</a>
<a name="L4-11" href="#L4-11">11</a>
<a name="L4-12" href="#L4-12">12</a>
<a name="L4-13" href="#L4-13">13</a>
<a name="L4-14" href="#L4-14">14</a>
<a name="L4-15" href="#L4-15">15</a>
<a name="L4-16" href="#L4-16">16</a>
<a name="L4-17" href="#L4-17">17</a>
<a name="L4-18" href="#L4-18">18</a>
<a name="L4-19" href="#L4-19">19</a>
<a name="L4-20" href="#L4-20">20</a>
<a name="L4-21" href="#L4-21">21</a>
<a name="L4-22" href="#L4-22">22</a>
<a name="L4-23" href="#L4-23">23</a>
<a name="L4-24" href="#L4-24">24</a>
<a name="L4-25" href="#L4-25">25</a>
<a name="L4-26" href="#L4-26">26</a>
<a name="L4-27" href="#L4-27">27</a>
<a name="L4-28" href="#L4-28">28</a>
<a name="L4-29" href="#L4-29">29</a>
<a name="L4-30" href="#L4-30">30</a>
<a name="L4-31" href="#L4-31">31</a>
<a name="L4-32" href="#L4-32">32</a>
<a name="L4-33" href="#L4-33">33</a>
<a name="L4-34" href="#L4-34">34</a>
<a name="L4-35" href="#L4-35">35</a>
<a name="L4-36" href="#L4-36">36</a>
<a name="L4-37" href="#L4-37">37</a>
<a name="L4-38" href="#L4-38">38</a>
<a name="L4-39" href="#L4-39">39</a>
<a name="L4-40" href="#L4-40">40</a>
<a name="L4-41" href="#L4-41">41</a>
<a name="L4-42" href="#L4-42">42</a>
<a name="L4-43" href="#L4-43">43</a>
<a name="L4-44" href="#L4-44">44</a>
<a name="L4-45" href="#L4-45">45</a>
<a name="L4-46" href="#L4-46">46</a>
<a name="L4-47" href="#L4-47">47</a>
<a name="L4-48" href="#L4-48">48</a></pre></div></div></div>

  <footer class="entry-meta post clearfix">
    <span class="tags"><a href="/tag">Tags</a>:
 
      <a href="/tag/#JavaScript">JavaScript</a>
      
    </span>

    <time datetime="2009-01-06T00:00:00.000Z">
      <a href="/2009">2009年</a>01月06日
    </time>
  </footer>
    <section>
      <div id="disqus_thread"></div>
      <noscript>
        要查看或参与评论，请启用 JavaScript 支持。<br />
        Please enable JavaScript to view the <a href="https://github.com/hotoo/blog/issues">comments powered by Gitment.</a>
      </noscript>
    </section>
  <link rel="stylesheet" href="https://imsun.github.io/gitment/style/default.css">
  <script src="https://imsun.github.io/gitment/dist/gitment.browser.js"></script>
  <script type="text/javascript">
    
    var disqus_identifier = "javascript-vars-scope";
    

    var gitment = new Gitment({
      id: disqus_identifier, // 可选。默认为 location.href
      owner: 'hotoo',
      repo: 'blog',
      oauth: {
        client_id: '2ac185fc670562ffa0aa',
        client_secret: '248f4f2d70ed28b1e3e70113db27d46067a981a8',
      },
    })
    gitment.render('disqus_thread');

    // var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    // dsq.src = 'http://hotoo.disqus.com/embed.js';
    // (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  </script>
</div>
</div>

    <!-- Vimlike status bar -->
    <div id="status-bar">
        <span id="count"></span>
    </div>
</div>
<div id="helper-box"></div>
<div id="helper" tabindex="1">
    <table>
    <thead>
        <tr>
            <th colspan="2">Help</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <th width="120">[count]gg</th>
            <td>跳转到第 [count] 行，默认第 1 行。</td>
        </tr>
        <tr>
            <th>[count]G</th>
            <td>跳转到第 [count] 行，默认最后一行。</td>
        </tr>
        <tr>
            <th>[count]j</th>
            <td>向下跳转 [count] 行，默认跳转一行。</td>
        </tr>
        <tr>
            <th>[count]k</th>
            <td>向上跳转 [count] 行，默认跳转一行。</td>
        </tr>
        <tr>
            <th>/</th>
            <td>开始搜索。按 &lt;Esc&gt; 退出。</td>
        </tr>
        <tr>
            <th>gh</th>
            <td>跳转到首页。</td>
        </tr>
        <tr>
            <th>gb</th>
            <td>跳转到博客首页。</td>
        </tr>
        <tr>
            <th>gw</th>
            <td>跳转到 Wiki 首页。</td>
        </tr>
        <tr>
            <th>gt</th>
            <td>跳转到我的 Twitter Profile 页。</td>
        </tr>
        <tr>
            <th>gp</th>
            <td>跳转到我的 Github Profile 页。</td>
        </tr>
        <tr>
            <th>?</th>
            <td>打开帮助。按 &lt;Esc&gt; 退出。</td>
        </tr>
    </tbody>
    </table>
</div>

<script type="text/javascript" src="/static/js/Vimlike.js"></script>
<footer>
  <p><a rel="license" href="http://creativecommons.org/licenses/by/2.5/"><img
    alt="Creative Commons License" style="border-width: 0pt;"
    src="http://i.creativecommons.org/l/by/2.5/88x31.png" align="right"/></a>
  This work is licensed under a
  <a rel="license" href="http://creativecommons.org/licenses/by/2.5/">Creative
    Commons Attribution 2.5 Generic License</a>.<br/>
  Copyleft &copy; 2005-2017, Power by
  <a href="http://lab.lepture.com/nico/">nico@0.5.2</a>, Theme by 闲耘™(@hotoo).
  </p>
</footer>
</div>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-2048484-1', 'auto');
  ga('send', 'pageview');

</script>

  </body>
</html>