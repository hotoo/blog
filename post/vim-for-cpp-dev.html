<hr />

<p>layout: post
title: 配置 Vim 作为 C++ 开发环境初步
tags:</p>

<pre><code>- Vim
- Cpp
</code></pre>

<hr />

<p>一般来说，如果你使用 Vim 开发完整的项目，使用 Makefile 并直接 <code>:make</code> 就可以了。</p>

<p>将下面的代码写入到 vimrc 中， Vim 会捕获编译过程中出现的消息并显示在 Quickfix 窗口。</p>

<pre><code>autocmd FileType cpp,c nmap &lt;F9&gt; :make&lt;CR&gt; :copen&lt;CR&gt; &lt;C-W&gt;10_
</code></pre>

<p>但是如果你是 C/C++ 新手，目前较多书写单个的 C/C++ 代码文件，或者只是想快速测试
某段代码的话，使用 gcc/g++ 直接编译或许是更简单的方式。你可以直接在 Vim 中执行
外部 gcc/g++ 命令，也可以想这样映射快捷键：</p>

<pre><code>autocmd FileType cpp nmap &lt;F10&gt; :w&lt;cr&gt;:exe "!gcc -o ".expand("%:r").".exe ".expand("%")&lt;cr&gt;
</code></pre>

<p>不过这样使用外部命令， Vim 并不能捕获编译过程的输出消息，就无法在 Vim 中根据
错误消息有效的定位到错误行了。</p>

<p>有更好的方法：</p>

<pre><code>autocmd FileType cpp nmap &lt;F10&gt; :w&lt;cr&gt;:exe ":set makeprg=g++\\\ -Wall\\\ -o\\\ ".expand("%:r").".exe\\\ ".expand("%")&lt;cr&gt;:make&lt;cr&gt;&lt;cr&gt;:cw&lt;cr&gt;
autocmd FileType c nmap &lt;F10&gt; :w&lt;cr&gt;:exe ":set makeprg=gcc\\\ -Wall\\\ -o\\\ ".expand("%:r").".exe\\\ ".expand("%")&lt;cr&gt;:make&lt;cr&gt;&lt;cr&gt;:cw&lt;cr&gt;
autocmd FileType cpp,c nmap &lt;F5&gt; :exe "!".expand("%:r").".exe"&lt;Left&gt;
autocmd FileType javascript nmap &lt;F9&gt; :call JsonLint()&lt;cr&gt;
</code></pre>

<p>再补充映射一些 Quickfix 模式中快速跳转的快捷键：</p>

<pre><code>map &lt;F4&gt; :cclose&lt;CR&gt;
map &lt;F8&gt; :cn&lt;CR&gt;
map &lt;F7&gt; :cp&lt;CR&gt;
</code></pre>

<p>完整的设置可以参考 <a href="http://hotoo.googlecode.com/svn/trunk/vim/_vimrc">我的 vimrc</a></p>

<p>更多讨论 <a href="https://groups.google.com/group/vim-cn/browse_thread/thread/79652cb66297881f">看这里</a>。</p>

<h2>参考</h2>

<ul>
<li><a href="http://easwy.com/blog/archives/advanced-vim-skills-quickfix-mode/">vim 使用进阶: 剑不离手 – quickfix</a>
  <a href="http://blog.zdnet.com.cn/html/30/422230-2881199.html">2</a></li>
</ul>

